{
  "generatedAt": "2026-02-02T02:16:25.184Z",
  "groundTruth": {
    "description": "Ground-truth queries for validating reference-first memory retrieval (memory_search_refs + memory_expand).",
    "version": 1
  },
  "defaults": {
    "maxResults": 8,
    "previewChars": 140,
    "expand": {
      "maxRefs": 2,
      "defaultLines": 20,
      "maxChars": 4000
    }
  },
  "cases": [
    {
      "id": "whatsapp-connected",
      "query": "WhatsApp gateway connected",
      "expect": {
        "anyContains": ["WhatsApp gateway connected", "WhatsApp gateway"],
        "pathsLike": ["memory/transcripts/"]
      },
      "ok": true,
      "sizes": {
        "baseline": {
          "chars": 14454,
          "tokens": 3614
        },
        "refs": {
          "chars": 5404,
          "tokens": 1351
        },
        "expanded": {
          "chars": 11739,
          "tokens": 2935
        }
      },
      "counts": {
        "refsReturned": 8,
        "expandedRequested": 2
      },
      "topRefs": [
        {
          "path": "memory/transcripts/2026-02-01.md",
          "startLine": 17132,
          "endLine": 17151,
          "score": 0.3756224781274795,
          "source": "memory",
          "preview": "‚îÇ WhatsApp ‚îÇ ON ‚îÇ WARN ‚îÇ linked ¬∑ accounts 1 ¬∑ gateway: Not linked (no WhatsApp Web session). ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Ä¶"
        },
        {
          "path": "memory/transcripts/2026-02-01.md",
          "startLine": 17104,
          "endLine": 17116,
          "score": 0.3710983633995056,
          "source": "memory",
          "preview": "hf8xrT7DD8Gfety3cFp6q+C183P1VxXmq/hT/Y157gh2GP/O+beG28FTFb+Hj7q8qzlP1p/gf89oT7DD8mfdtC7eFpyp+Cx93f1Vxnqo/xf+Y155gh+HPvG9buC08VfFb+Lj7q4rzVP0‚Ä¶"
        },
        {
          "path": "memory/transcripts/2026-02-01.md",
          "startLine": 17104,
          "endLine": 17115,
          "score": 0.37057125270366664,
          "source": "memory",
          "preview": "hf8xrT7DD8Gfety3cFp6q+C183P1VxXmq/hT/Y157gh2GP/O+beG28FTFb+Hj7q8qzlP1p/gf89oT7DD8mfdtC7eFpyp+Cx93f1Vxnqo/xf+Y155gh+HPvG9buC08VfFb+Lj7q4rzVP0‚Ä¶"
        }
      ]
    },
    {
      "id": "rlm-augment-hook",
      "query": "rlm-augment",
      "expect": {
        "anyContains": ["rlm-augment", "memory_search:post", "memory_search_refs:post"],
        "pathsLike": ["memory/transcripts/"]
      },
      "ok": true,
      "sizes": {
        "baseline": {
          "chars": 14768,
          "tokens": 3692
        },
        "refs": {
          "chars": 5360,
          "tokens": 1340
        },
        "expanded": {
          "chars": 7293,
          "tokens": 1824
        }
      },
      "counts": {
        "refsReturned": 8,
        "expandedRequested": 2
      },
      "topRefs": [
        {
          "path": "memory/transcripts/2026-02-01.md",
          "startLine": 20026,
          "endLine": 20065,
          "score": 0.5986262857913971,
          "source": "memory",
          "preview": "Content-Transfer-Encoding: 8bit - Add 'tool' event type to InternalHookEventType - Modify memory_search tool to dispatch tool:memory_search:‚Ä¶"
        },
        {
          "path": "memory/transcripts/2026-02-01.md",
          "startLine": 20331,
          "endLine": 20388,
          "score": 0.5742235243320465,
          "source": "memory",
          "preview": "**ü§ñ assistant** (2026-02-01T21:41:06) Excellent question! **Yes, absolutely** - and this is exactly what the RLM paper advocates for. ## Cu‚Ä¶"
        },
        {
          "path": "memory/transcripts/2026-02-01.md",
          "startLine": 20375,
          "endLine": 20427,
          "score": 0.5704627573490142,
          "source": "memory",
          "preview": "2. Track which results you actually reference in your response 3. Expand only those ### Option 3: Smart Chunking Instead of 700-char fixed s‚Ä¶"
        }
      ]
    },
    {
      "id": "token-optimization",
      "query": "Return references first, lazy-load snippets",
      "expect": {
        "anyContains": ["references first", "lazy-load", "RLM"],
        "pathsLike": ["memory/transcripts/"]
      },
      "ok": true,
      "sizes": {
        "baseline": {
          "chars": 5765,
          "tokens": 1442
        },
        "refs": {
          "chars": 2238,
          "tokens": 560
        },
        "expanded": {
          "chars": 7378,
          "tokens": 1845
        }
      },
      "counts": {
        "refsReturned": 3,
        "expandedRequested": 2
      },
      "topRefs": [
        {
          "path": "memory/transcripts/2026-02-01.md",
          "startLine": 23416,
          "endLine": 23460,
          "score": 0.6188838839530945,
          "source": "memory",
          "preview": "Just‚Ä¶ fewer chances for humans (and models) to be lazy. ## What‚Äôs Next There are still two obvious evolutions: 1. **Token efficiency** - Ret‚Ä¶"
        },
        {
          "path": "memory/transcripts/2026-02-01.md",
          "startLine": 23141,
          "endLine": 23204,
          "score": 0.5533955693244934,
          "source": "memory",
          "preview": "Then a second bundled hook listens: - `rlm-index-refresh` It‚Äôs debounced and rate-limited so it doesn‚Äôt melt your CPU. But the important par‚Ä¶"
        },
        {
          "path": "memory/transcripts/2026-02-01.md",
          "startLine": 23360,
          "endLine": 23430,
          "score": 0.5375986039638518,
          "source": "memory",
          "preview": "It also gives you a new kind of honesty: - üîÆ found via semantic - üîç found via RLM - üß† found via both No more pretending everything is ‚Äúth‚Ä¶"
        }
      ]
    },
    {
      "id": "chessrt",
      "query": "ChessRT Phase 3 RTC engine",
      "expect": {
        "anyContains": ["ChessRT", "Phase 3", "RTC"],
        "pathsLike": ["memory/transcripts/"]
      },
      "ok": true,
      "sizes": {
        "baseline": {
          "chars": 14684,
          "tokens": 3671
        },
        "refs": {
          "chars": 5478,
          "tokens": 1370
        },
        "expanded": {
          "chars": 7176,
          "tokens": 1794
        }
      },
      "counts": {
        "refsReturned": 8,
        "expandedRequested": 2
      },
      "topRefs": [
        {
          "path": "memory/transcripts/2026-01-31.md",
          "startLine": 35833,
          "endLine": 35857,
          "score": 0.7220630437135696,
          "source": "memory",
          "preview": "| **ChessRT Chess Core** | Built chess core engine with move validation, FEN parsing, clocks, full test suite | | **Project Structure** | `c‚Ä¶"
        },
        {
          "path": "memory/transcripts/2026-01-31.md",
          "startLine": 35808,
          "endLine": 35835,
          "score": 0.718107783794403,
          "source": "memory",
          "preview": "- It was part of Phase 2 work alongside UI polish, clock display, and game-over modals --- **Summary:** PGN format was implemented in ChessR‚Ä¶"
        },
        {
          "path": "memory/transcripts/2026-02-01.md",
          "startLine": 20454,
          "endLine": 20461,
          "score": 0.7065816730260849,
          "source": "memory",
          "preview": "\"snippet\": \"| **ChessRT Chess Core** | Built chess core engine with move validation, FEN parsing, clocks, full test suite |\\n| **Project Str‚Ä¶"
        }
      ]
    },
    {
      "id": "analysis-queue",
      "query": "queue analysis job",
      "expect": {
        "anyContains": ["Queue analysis job", "analysis", "queued"],
        "pathsLike": ["memory/transcripts/"]
      },
      "ok": true,
      "sizes": {
        "baseline": {
          "chars": 2012,
          "tokens": 503
        },
        "refs": {
          "chars": 914,
          "tokens": 229
        },
        "expanded": {
          "chars": 3776,
          "tokens": 944
        }
      },
      "counts": {
        "refsReturned": 1,
        "expandedRequested": 1
      },
      "topRefs": [
        {
          "path": "memory/transcripts/2026-01-31.md",
          "startLine": 35707,
          "endLine": 35734,
          "score": 0.37728368937969203,
          "source": "memory",
          "preview": "Found **9 matches** across sessions from 2026-01-31. The results show various types of analysis mentioned in context: | Topic | Context | |-‚Ä¶"
        }
      ]
    },
    {
      "id": "glicko",
      "query": "Glicko-2",
      "expect": {
        "anyContains": ["Glicko", "Glicko-2"],
        "pathsLike": ["memory/transcripts/"]
      },
      "ok": true,
      "sizes": {
        "baseline": {
          "chars": 13062,
          "tokens": 3266
        },
        "refs": {
          "chars": 4760,
          "tokens": 1190
        },
        "expanded": {
          "chars": 7001,
          "tokens": 1751
        }
      },
      "counts": {
        "refsReturned": 7,
        "expandedRequested": 2
      },
      "topRefs": [
        {
          "path": "memory/transcripts/2026-01-31.md",
          "startLine": 15089,
          "endLine": 15133,
          "score": 0.6179297149181366,
          "source": "memory",
          "preview": "Enhanced matching available: YES Content length: 470 chars Glicko matched: True Terms: ['glicko', 'rating', 'chess'] **ü§ñ assistant** (2026-‚Ä¶"
        },
        {
          "path": "memory/transcripts/2026-01-31.md",
          "startLine": 28862,
          "endLine": 28906,
          "score": 0.5617466866970062,
          "source": "memory",
          "preview": "[Queued announce messages while agent was busy] [Queue overflow] Dropped 1 announce due to cap. Summary: - batch1-008 --- Queued #1 A backgr‚Ä¶"
        },
        {
          "path": "memory/transcripts/2026-01-31.md",
          "startLine": 49211,
          "endLine": 49264,
          "score": 0.5564026892185211,
          "source": "memory",
          "preview": "## Enhanced Matching (v2.0) The skill uses four matching strategies that combine for 99.8% accuracy: ### 1. Substring Matching Query word co‚Ä¶"
        }
      ]
    }
  ],
  "summary": {
    "total": 6,
    "passed": 6,
    "passRate": 1
  }
}
